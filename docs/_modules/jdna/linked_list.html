
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>jdna.linked_list &#8212; jdna 0.1.5 documentation</title>
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">jdna 0.1.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="None" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#40583f; color:#4bd04b; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

<div>
    <div>
        <h1 align="center"><a href="../../index.html">jdna</a>
        </h1>
    </div>
</div>

<p align="center" class="sidebar-subtitle">version: <a href="https://github.com/jvrana/jdna">0.1.5</a></p>
<div>

</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">jdna</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/api_reference.html">API Reference</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../../index.html">Docs</a></li>
              
                <li><a href="../index.html">Module code</a></li>
              
              <li>jdna.linked_list</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <h1>Source code for jdna.linked_list</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Linked list model to represent linear or circular sequences.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="k">import</span> <span class="n">copy</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="k">import</span> <span class="n">IntFlag</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">reduce</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Any</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Callable</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Dict</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Generator</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Iterable</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">List</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Sequence</span> <span class="k">as</span> <span class="n">TypingSequence</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Tuple</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Union</span>


<div class="viewcode-block" id="LinkedListException"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.LinkedListException">[docs]</a><span class="k">class</span> <span class="nc">LinkedListException</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generic linked list exception.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="LinkedListIndexError"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.LinkedListIndexError">[docs]</a><span class="k">class</span> <span class="nc">LinkedListIndexError</span><span class="p">(</span><span class="n">LinkedListException</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Indices were out of bounds for LinkedList.&quot;&quot;&quot;</span></div>


<div class="viewcode-block" id="Node"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node">[docs]</a><span class="k">class</span> <span class="nc">Node</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A node in a linked list.&quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;__next&quot;</span><span class="p">,</span> <span class="s2">&quot;__prev&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Node constructor. Stores a single piece of data.</span>

<span class="sd">        :param data: data</span>
<span class="sd">        :type data: any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__next</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="Node.prev"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.prev">[docs]</a>    <span class="k">def</span> <span class="nf">prev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the previous node.</span>

<span class="sd">        :return: the previous node</span>
<span class="sd">        :rtype: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span></div>

<div class="viewcode-block" id="Node.next"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.next">[docs]</a>    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the next node.</span>

<span class="sd">        :return: the next node</span>
<span class="sd">        :rtype: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__next</span></div>

<div class="viewcode-block" id="Node.add_next"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.add_next">[docs]</a>    <span class="k">def</span> <span class="nf">add_next</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new node and add to next.</span>

<span class="sd">        :param data: any data</span>
<span class="sd">        :type data: any</span>
<span class="sd">        :return: the new node</span>
<span class="sd">        :rtype: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="n">new_node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_node</span></div>

<div class="viewcode-block" id="Node.add_prev"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.add_prev">[docs]</a>    <span class="k">def</span> <span class="nf">add_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new node and add to previous.</span>

<span class="sd">        :param data: any data</span>
<span class="sd">        :type data: any</span>
<span class="sd">        :return: the new node</span>
<span class="sd">        :rtype: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prev</span><span class="p">(</span><span class="n">new_node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_node</span></div>

<div class="viewcode-block" id="Node.cut_next"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.cut_next">[docs]</a>    <span class="k">def</span> <span class="nf">cut_next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cut the next node, return the cut node.</span>

<span class="sd">        :return: the cut (next) node</span>
<span class="sd">        :rtype: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">next_node</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">next_node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">next_node</span><span class="o">.</span><span class="n">__prev</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__next</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">next_node</span></div>

<div class="viewcode-block" id="Node.cut_prev"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.cut_prev">[docs]</a>    <span class="k">def</span> <span class="nf">cut_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Cut the previous node, return the cut node.</span>

<span class="sd">        :return: the cut (previous) node</span>
<span class="sd">        :rtype: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prev_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">prev_node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prev_node</span><span class="o">.</span><span class="n">__next</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">prev_node</span></div>

<div class="viewcode-block" id="Node._break_connections"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node._break_connections">[docs]</a>    <span class="k">def</span> <span class="nf">_break_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Break connections in this node.</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_prev</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div>

<div class="viewcode-block" id="Node.remove"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove node from linked list, connecting the previous and next nodes</span>
<span class="sd">        together.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">next_node</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">prev_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prev</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">next_node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">next_node</span><span class="o">.</span><span class="n">set_prev</span><span class="p">(</span><span class="n">prev_node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prev_node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prev_node</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="n">next_node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_break_connections</span><span class="p">()</span>
        <span class="k">return</span></div>

<div class="viewcode-block" id="Node.swap"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.swap">[docs]</a>    <span class="k">def</span> <span class="nf">swap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Swap the previous and next nodes.</span>

<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__next</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__next</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span> <span class="o">=</span> <span class="n">temp</span></div>

<div class="viewcode-block" id="Node.set_next"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.set_next">[docs]</a>    <span class="k">def</span> <span class="nf">set_next</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the next node.</span>

<span class="sd">        :param node:</span>
<span class="sd">        :type node:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">__prev</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__next</span> <span class="o">=</span> <span class="n">node</span></div>

<div class="viewcode-block" id="Node.set_prev"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.set_prev">[docs]</a>    <span class="k">def</span> <span class="nf">set_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the previous node.</span>

<span class="sd">        :param node:</span>
<span class="sd">        :type node:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">node</span><span class="o">.</span><span class="n">__next</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span> <span class="o">=</span> <span class="n">node</span></div>

    <span class="k">def</span> <span class="nf">has_next</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__next</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">has_prev</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prev</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_propogate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">next_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">stop</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stop_criteria</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">curr</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">curr</span> <span class="ow">is</span> <span class="kc">None</span>
                <span class="ow">or</span> <span class="n">curr</span> <span class="ow">in</span> <span class="n">visited</span>
                <span class="ow">or</span> <span class="p">(</span><span class="n">stop_criteria</span> <span class="ow">and</span> <span class="n">stop_criteria</span><span class="p">(</span><span class="n">curr</span><span class="p">))</span>
            <span class="p">):</span>
                <span class="k">return</span>
            <span class="k">yield</span> <span class="n">curr</span>
            <span class="k">if</span> <span class="n">curr</span> <span class="ow">is</span> <span class="n">stop</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">curr</span><span class="p">)</span>
            <span class="n">curr</span> <span class="o">=</span> <span class="n">next_method</span><span class="p">(</span><span class="n">curr</span><span class="p">)</span>

<div class="viewcode-block" id="Node.fwd"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.fwd">[docs]</a>    <span class="k">def</span> <span class="nf">fwd</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stop_node</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stop_criteria</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Propogates forwards until stop node is visited or stop criteria is</span>
<span class="sd">        reached.</span>

<span class="sd">        :param stop_node:</span>
<span class="sd">        :type stop_node:</span>
<span class="sd">        :param stop_criteria:</span>
<span class="sd">        :type stop_criteria:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_propogate</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">next</span><span class="p">(),</span> <span class="n">stop</span><span class="o">=</span><span class="n">stop_node</span><span class="p">,</span> <span class="n">stop_criteria</span><span class="o">=</span><span class="n">stop_criteria</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Node.rev"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.rev">[docs]</a>    <span class="k">def</span> <span class="nf">rev</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">stop_node</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">stop_criteria</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Propogates backwards until stop node is visited or stop criteria is</span>
<span class="sd">        reached.</span>

<span class="sd">        :param stop_node:</span>
<span class="sd">        :type stop_node:</span>
<span class="sd">        :param stop_criteria:</span>
<span class="sd">        :type stop_criteria:</span>
<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_propogate</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">prev</span><span class="p">(),</span> <span class="n">stop</span><span class="o">=</span><span class="n">stop_node</span><span class="p">,</span> <span class="n">stop_criteria</span><span class="o">=</span><span class="n">stop_criteria</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Node.find_first"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.find_first">[docs]</a>    <span class="k">def</span> <span class="nf">find_first</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Node&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Find the head node.</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rev</span><span class="p">()</span>
        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">first</span> <span class="ow">in</span> <span class="n">rev</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">first</span></div>

<div class="viewcode-block" id="Node.find_last"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.find_last">[docs]</a>    <span class="k">def</span> <span class="nf">find_last</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Node&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Find the tail node.</span>

<span class="sd">        :return:</span>
<span class="sd">        :rtype:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fwd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fwd</span><span class="p">()</span>
        <span class="n">last</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">for</span> <span class="n">last</span> <span class="ow">in</span> <span class="n">fwd</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">last</span></div>

<div class="viewcode-block" id="Node.longest_match"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.longest_match">[docs]</a>    <span class="k">def</span> <span class="nf">longest_match</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="n">next_method</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="s2">&quot;Node&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Find the longest match between two linked_lists.</span>

<span class="sd">        :param node: the node to compare</span>
<span class="sd">        :type node: Node</span>
<span class="sd">        :param next_method: how to obtain the next node</span>
<span class="sd">        :type next_method: callable</span>
<span class="sd">        :return: list of tuples containing matching nodes</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">next_method</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">next_method</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

        <span class="n">x1</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">node</span>
        <span class="n">start</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">end</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">while</span> <span class="n">x1</span> <span class="ow">and</span> <span class="n">x2</span> <span class="ow">and</span> <span class="n">x1</span><span class="o">.</span><span class="n">equivalent</span><span class="p">(</span><span class="n">x2</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
            <span class="n">end</span> <span class="o">=</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">next_method</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="n">next_method</span><span class="p">(</span><span class="n">x2</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span></div>

<div class="viewcode-block" id="Node._complete_match"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node._complete_match">[docs]</a>    <span class="k">def</span> <span class="nf">_complete_match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">,</span> <span class="n">next_method</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return whether the longest match between two nodes is equivalent.</span>

<span class="sd">        :param node: the node to compare</span>
<span class="sd">        :type node: Node</span>
<span class="sd">        :param next_method: how to obtain the next node</span>
<span class="sd">        :type next_method: callable</span>
<span class="sd">        :return: whether the longest match between two nodes is equivalent</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">longest_match</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">next_method</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">length</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">length</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="n">next_method</span><span class="p">(</span><span class="n">t1</span><span class="p">)</span> <span class="ow">and</span> <span class="n">next_method</span><span class="p">(</span><span class="n">t2</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">complete_match_fwd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_complete_match</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">next</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">complete_match_rev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_complete_match</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">prev</span><span class="p">())</span>

<div class="viewcode-block" id="Node.equivalent"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.Node.equivalent">[docs]</a>    <span class="k">def</span> <span class="nf">equivalent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;Node&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Evaluates whether two nodes hold the same data.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">data</span></div>

    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Node&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Node&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Node&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Node&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;copy.deepcopy not implemented with class&quot;</span>
            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">. Use copy.copy instead.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>


<div class="viewcode-block" id="EmptyNode"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.EmptyNode">[docs]</a><span class="k">class</span> <span class="nc">EmptyNode</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># @property</span>
    <span class="c1"># def __next(self):</span>
    <span class="c1">#     return EmptyNode()</span>
    <span class="c1">#</span>
    <span class="c1"># @property</span>
    <span class="c1"># def __prev(self):</span>
    <span class="c1">#     return EmptyNode()</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_propogate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span>
        <span class="k">yield</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>


<div class="viewcode-block" id="LinkedListMatch"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.LinkedListMatch">[docs]</a><span class="k">class</span> <span class="nc">LinkedListMatch</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A match object.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">template_bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">query_bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">template</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">span</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">template</span><span class="o">.</span><span class="n">indices_of</span><span class="p">(</span><span class="n">template_bounds</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_span</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">indices_of</span><span class="p">(</span><span class="n">query_bounds</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_bounds</span> <span class="o">=</span> <span class="n">query_bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">template_bounds</span> <span class="o">=</span> <span class="n">template_bounds</span>

<div class="viewcode-block" id="LinkedListMatch.batch_create"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.LinkedListMatch.batch_create">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">batch_create</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">template_bounds_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]],</span>
        <span class="n">query_bounds_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="n">Node</span><span class="p">]],</span>
        <span class="n">template</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;LinkedListMatch&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Efficiently create several LinkedListMatches from lists of template</span>
<span class="sd">        starts/ends and query starts/ends.</span>

<span class="sd">        :param template_bounds_list: list of 2 len tuples containing starts and ends from a template</span>
<span class="sd">        :type template_bounds_list: template DoubleLinkedList</span>
<span class="sd">        :param query_bounds_list: list of 2 len tuples containing starts and ends from a query</span>
<span class="sd">        :type query_bounds_list: query DoubleLinkedList</span>
<span class="sd">        :param template: the template</span>
<span class="sd">        :type template: DoubleLinkedList</span>
<span class="sd">        :param query: the query</span>
<span class="sd">        :type query: DoubleLinkedList</span>
<span class="sd">        :return: matchese</span>
<span class="sd">        :rtype: list of LinkedListMatch</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">template_bounds_list</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">query_bounds_list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">LinkedListIndexError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot create Matches The template bounds list must be same size as query_&quot;</span>
                <span class="s2">&quot;bounds list&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">template_bounds_list</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">template_nodes</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">template_bounds_list</span><span class="p">)</span>
        <span class="n">query_nodes</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">query_bounds_list</span><span class="p">)</span>
        <span class="n">template_indices</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">indices_of</span><span class="p">(</span><span class="n">template_nodes</span><span class="p">)</span>
        <span class="n">query_indices</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">indices_of</span><span class="p">(</span><span class="n">query_nodes</span><span class="p">)</span>

        <span class="n">matches</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">template_nodes</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">new_match</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
            <span class="n">new_match</span><span class="o">.</span><span class="n">span</span> <span class="o">=</span> <span class="p">(</span><span class="n">template_indices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">template_indices</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">new_match</span><span class="o">.</span><span class="n">query_span</span> <span class="o">=</span> <span class="p">(</span><span class="n">query_indices</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">query_indices</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">new_match</span><span class="o">.</span><span class="n">query_bounds</span> <span class="o">=</span> <span class="p">(</span><span class="n">query_nodes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">query_nodes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">new_match</span><span class="o">.</span><span class="n">template_bounds</span> <span class="o">=</span> <span class="p">(</span><span class="n">template_nodes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">template_nodes</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="n">matches</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_match</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matches</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query_start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">query_end</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{cls}</span><span class="s2"> span=</span><span class="si">{span}</span><span class="s2">, qspan=</span><span class="si">{query_span}</span><span class="s2">&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">span</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">span</span><span class="p">,</span> <span class="n">query_span</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query_span</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span></div>


<div class="viewcode-block" id="DoubleLinkedList"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList">[docs]</a><span class="k">class</span> <span class="nc">DoubleLinkedList</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;A generic double linked list class.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="DoubleLinkedList.Direction"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.Direction">[docs]</a>    <span class="k">class</span> <span class="nc">Direction</span><span class="p">(</span><span class="n">IntFlag</span><span class="p">):</span>
        <span class="n">FORWARD</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">REVERSE</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span></div>

    <span class="n">NODE_CLASS</span> <span class="o">=</span> <span class="n">Node</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">TypingSequence</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">first</span><span class="p">:</span> <span class="n">Node</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cyclic</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;linked list construction.</span>

<span class="sd">        :param data: iterable data</span>
<span class="sd">        :type data: iterable</span>
<span class="sd">        :param first: first node</span>
<span class="sd">        :type first: Node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_head</span> <span class="o">=</span> <span class="n">EmptyNode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">first</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_head</span> <span class="o">=</span> <span class="n">first</span>
        <span class="k">if</span> <span class="n">cyclic</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">circularize</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">new_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;NODE_CLASS&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">NODE_CLASS</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sequence</span><span class="p">:</span> <span class="n">TypingSequence</span><span class="p">[</span><span class="n">Any</span><span class="p">]):</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>
            <span class="n">curr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_node</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_head</span> <span class="o">=</span> <span class="n">curr</span>
            <span class="k">if</span> <span class="n">prev</span><span class="p">:</span>
                <span class="n">prev</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="n">curr</span><span class="p">)</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">curr</span>

    <span class="k">def</span> <span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_head</span><span class="p">,</span> <span class="n">EmptyNode</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_head</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_head</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_head</span>
        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_head</span><span class="o">.</span><span class="n">find_first</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_head</span> <span class="o">=</span> <span class="n">first</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_head</span>

    <span class="nd">@head</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_head</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_head</span> <span class="o">=</span> <span class="n">new_head</span>
        <span class="k">return</span> <span class="n">new_head</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tail</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">find_last</span><span class="p">()</span>

    <span class="c1"># TODO: This method is inefficient, but can probably be managed more manually (i.e. anytime a manipulation occurs)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cyclic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">curr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_head</span>
        <span class="k">while</span> <span class="n">curr</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">curr</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">curr</span><span class="p">)</span>
            <span class="n">curr</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">curr</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@cyclic</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">cyclic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">linearize</span><span class="p">()</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span> <span class="ow">and</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">circularize</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">circular</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Alias for cyclic.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span>

    <span class="nd">@circular</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">circular</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Alias for cyclic.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span> <span class="o">=</span> <span class="n">v</span>

    <span class="k">def</span> <span class="nf">circularize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">linearize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">this_i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">this_i</span><span class="o">.</span><span class="n">cut_prev</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">this_i</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Node</span><span class="p">]:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">fwd</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">n</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="n">i</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">n</span>
        <span class="k">raise</span> <span class="n">LinkedListIndexError</span><span class="p">(</span>
            <span class="s2">&quot;There is no node at index &#39;</span><span class="si">{}</span><span class="s2">&#39;. There are </span><span class="si">{}</span><span class="s2"> nodes.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">cut</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">]],</span> <span class="n">cut_prev</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="c1"># Special case in which i == len</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">in</span> <span class="n">i</span> <span class="ow">and</span> <span class="n">cut_prev</span><span class="p">:</span>
            <span class="n">i</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
                <span class="n">i</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="n">i</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_in_bounds</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">self_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">all_nodes</span> <span class="o">=</span> <span class="n">self_copy</span><span class="o">.</span><span class="n">nodes</span>
        <span class="n">cut_nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cut_loc</span> <span class="ow">in</span> <span class="n">i</span><span class="p">:</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">all_nodes</span><span class="p">[</span><span class="n">cut_loc</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">cut_prev</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">cut_prev</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">cut_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="n">cut_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cut_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">cut_next</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">cut_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">(</span><span class="n">cut_nodes</span><span class="p">)</span>

<div class="viewcode-block" id="DoubleLinkedList.collect_nodes"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.collect_nodes">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">collect_nodes</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return all visisted nodes and return an unordered set of nodes.</span>

<span class="sd">        :return: all visited nodes</span>
<span class="sd">        :rtype: set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">tail</span> <span class="ow">in</span> <span class="n">n</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span><span class="n">stop_criteria</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">):</span>
                    <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">head</span> <span class="ow">in</span> <span class="n">n</span><span class="o">.</span><span class="n">rev</span><span class="p">(</span><span class="n">stop_criteria</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">):</span>
                    <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">visited</span></div>

    <span class="k">def</span> <span class="nf">all_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">collect_nodes</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">])</span>

<div class="viewcode-block" id="DoubleLinkedList.find_ends"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.find_ends">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">find_ends</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Efficiently finds the head and tails from a group of nodes.&quot;&quot;&quot;</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">heads</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">tails</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">n</span>
                <span class="n">tail</span> <span class="o">=</span> <span class="n">n</span>
                <span class="n">visited_tails</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">visited_heads</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">tail</span> <span class="ow">in</span> <span class="n">n</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span><span class="n">stop_criteria</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">):</span>
                    <span class="n">visited_tails</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">head</span> <span class="ow">in</span> <span class="n">n</span><span class="o">.</span><span class="n">rev</span><span class="p">(</span><span class="n">stop_criteria</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">):</span>
                    <span class="n">visited_heads</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
                <span class="n">visited</span> <span class="o">=</span> <span class="n">visited</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">visited_heads</span><span class="p">)</span>
                <span class="n">visited</span> <span class="o">=</span> <span class="n">visited</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">visited_tails</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">head</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">heads</span> <span class="ow">and</span> <span class="n">tails</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tails</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">head</span><span class="o">.</span><span class="n">has_prev</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">tail</span><span class="o">.</span><span class="n">has_next</span><span class="p">():</span>
                        <span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
                        <span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="n">heads</span><span class="p">,</span> <span class="n">tails</span><span class="p">)</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">segments</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">cls</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">find_ends</span><span class="p">(</span><span class="n">nodes</span><span class="p">)]</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Node</span><span class="p">],</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">copy_insertion</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_in_bounds</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node_list</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot insert a cyclic sequence&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">copy_insertion</span><span class="p">:</span>
            <span class="n">node_list</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">node_list</span><span class="p">)</span>
        <span class="c1"># TODO: This copies the insertion sequence, you want that?</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">loc2</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">loc1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">loc2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">loc1</span> <span class="o">=</span> <span class="n">loc2</span><span class="o">.</span><span class="n">prev</span><span class="p">()</span>
        <span class="n">first</span> <span class="o">=</span> <span class="n">node_list</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">last</span> <span class="o">=</span> <span class="n">node_list</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">first</span><span class="o">.</span><span class="n">set_prev</span><span class="p">(</span><span class="n">loc1</span><span class="p">)</span>
        <span class="n">last</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="n">loc2</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="p">):</span>  <span class="c1"># Special case in which user inserts sequence in front of their sequence; they probably intend to re-index it</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">first</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_in_bounds</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">to_be_removed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">new_first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_first</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">new_first</span><span class="p">)</span>
        <span class="n">to_be_removed</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">new_first</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">reindex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_if_in_bounds</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Cannot re-index a linear </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">_check_if_in_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">num</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">num</span><span class="p">:</span>
            <span class="n">mn</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">mx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="n">mx</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LinkedListIndexError</span><span class="p">(</span>
                    <span class="s2">&quot;Index </span><span class="si">{}</span><span class="s2"> out of acceptable bounds (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">mn</span><span class="p">,</span> <span class="n">mx</span><span class="p">)</span>
                <span class="p">)</span>

    <span class="c1"># TODO: implement yield in find_iter, search_all should call this</span>
    <span class="c1"># TODO: query should be any interable</span>
    <span class="c1"># TODO: [:1] and [-10:] style cuts should be available</span>
    <span class="c1"># TODO: documentation for methods</span>
    <span class="c1"># TODO: move DoubleLinkedList to its own thing?</span>
    <span class="c1"># TODO: element insertion</span>
    <span class="c1"># TODO: search should return a &#39;cut&#39; of the sequence</span>
    <span class="k">def</span> <span class="nf">search_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Node</span><span class="p">]]:</span>
        <span class="n">curr_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
        <span class="n">q_node</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">head</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">found</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">while</span> <span class="n">curr_node</span> <span class="ow">and</span> <span class="n">curr_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">curr_node</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">curr_node</span><span class="o">.</span><span class="n">complete_match_fwd</span><span class="p">(</span><span class="n">q_node</span><span class="p">):</span>
                <span class="n">found</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">curr_node</span><span class="p">))</span>
            <span class="n">curr_node</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">curr_node</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">found</span>

    <span class="c1"># def longest_match(self, other):</span>
    <span class="c1">#     n1 = self.head</span>
    <span class="c1">#     n2 = other.head</span>
    <span class="c1">#     start = None</span>
    <span class="c1">#     while n1 and n2 and n1.equivalent(n2):</span>
    <span class="c1">#         if start is None:</span>
    <span class="c1">#             start = (n1, n2)</span>
    <span class="c1">#         n1 = next(n1)</span>
    <span class="c1">#         n2 = next(n2)</span>
    <span class="c1">#</span>
    <span class="c1">#         curr = next(curr)</span>
    <span class="c1">#     for n in self:</span>
    <span class="c1">#         if other_node.equivalent(n):</span>
    <span class="c1">#             stop = n</span>
    <span class="c1">#             if start is None:</span>
    <span class="c1">#                 start = stop</span>
    <span class="c1">#         other_node = next(other_node)</span>

    <span class="c1"># def longest_match(self, other):</span>
    <span class="c1">#     matched = []</span>
    <span class="c1">#     i = 0</span>
    <span class="c1">#     j = i</span>
    <span class="c1">#     for x1, x2 in zip(self, other):</span>
    <span class="c1">#         if x1.equivalent(x2):</span>
    <span class="c1">#             j += 1</span>
    <span class="c1">#             matched.append((x1, x2))</span>
    <span class="c1">#     if j &gt; len(self):</span>
    <span class="c1">#         if not self.cyclic:</span>
    <span class="c1">#             raise Exception(&quot;Template was expected to be cyclic but was not&quot;)</span>
    <span class="c1">#         j -= len(self)</span>
    <span class="c1">#     return LinkedListMatch(self.head, )</span>
    <span class="c1">#     if len(matched) == qlen:</span>
    <span class="c1">#         if j &gt; len(self):</span>
    <span class="c1">#             if self.cyclic:</span>
    <span class="c1">#                 j -= len(self)</span>
    <span class="c1">#             else:</span>
    <span class="c1">#                 raise Exception(&quot;Template was expected to be cyclic but was not&quot;)</span>
    <span class="c1">#         yield LinkedListMatch(curr_node, x1, span=(i, j - 1))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">n1</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
        <span class="n">n2</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
        <span class="n">query_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Direction</span><span class="o">.</span><span class="n">FORWARD</span><span class="p">,</span>
        <span class="n">template_direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Direction</span><span class="o">.</span><span class="n">FORWARD</span><span class="p">,</span>
        <span class="n">protocol</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">protocol</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">def</span> <span class="nf">protocol</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">equivalent</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

        <span class="n">iterators</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">FORWARD</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fwd</span><span class="p">(),</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">REVERSE</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">rev</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="n">iterators</span><span class="p">[</span><span class="n">template_direction</span><span class="p">](</span><span class="n">n1</span><span class="p">),</span> <span class="n">iterators</span><span class="p">[</span><span class="n">query_direction</span><span class="p">](</span><span class="n">n2</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">if</span> <span class="n">protocol</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">):</span>
                <span class="k">yield</span> <span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span>

<div class="viewcode-block" id="DoubleLinkedList.find_iter"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.find_iter">[docs]</a>    <span class="k">def</span> <span class="nf">find_iter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">,</span>
        <span class="n">min_query_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">direction</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Direction</span><span class="o">.</span><span class="n">FORWARD</span><span class="p">,</span>
        <span class="n">protocol</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Iteratively finds positions that match the query.</span>

<span class="sd">        :param query: query list to find</span>
<span class="sd">        :type query: DoubleLinkedList</span>
<span class="sd">        :param min_query_length: the minimum number of matches to return. If None, find_iter will only return complete</span>
<span class="sd">                                matches</span>
<span class="sd">        :type min_query_length: inst</span>
<span class="sd">        :param direction: If Direction.FORWARD (+1), find iter will search from the query head and search forward,</span>
<span class="sd">                        potentially leaving a &#39;tail&#39; overhang on the query. If</span>
<span class="sd">                        Direction.REVERSE (-1), find iter will search from the query tail and search reverse, potentially</span>
<span class="sd">                        leaving a &#39;head&#39; overhang on the query. If a tuple, the template_direction and query_direction are</span>
<span class="sd">                        set respectively.</span>
<span class="sd">        :type direction: int or tuple</span>
<span class="sd">        :param protocol: the callable taking two parameters (as Node) to compare during find. If None, defaults</span>
<span class="sd">                        to &#39;equivalent&#39;</span>
<span class="sd">        :type protocol: callable</span>
<span class="sd">        :return: list of LinkedListMatches</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">template_direction</span><span class="p">,</span> <span class="n">query_direction</span> <span class="o">=</span> <span class="n">direction</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">template_direction</span><span class="p">,</span> <span class="n">query_direction</span> <span class="o">=</span> <span class="n">direction</span><span class="p">,</span> <span class="n">direction</span>

        <span class="n">curr_node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
        <span class="n">visited</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">REVERSE</span> <span class="o">==</span> <span class="n">query_direction</span><span class="p">:</span>
            <span class="n">query_start</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">tail</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">query_start</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">head</span>
        <span class="n">qlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_query_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">min_query_length</span> <span class="o">=</span> <span class="n">qlen</span>

        <span class="n">template_nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">query_nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="n">curr_node</span> <span class="ow">and</span> <span class="n">curr_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">depth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="n">depth</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">curr_node</span><span class="p">)</span>
            <span class="n">matches</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span>
                    <span class="n">curr_node</span><span class="p">,</span>
                    <span class="n">query_start</span><span class="p">,</span>
                    <span class="n">query_direction</span><span class="o">=</span><span class="n">query_direction</span><span class="p">,</span>
                    <span class="n">template_direction</span><span class="o">=</span><span class="n">template_direction</span><span class="p">,</span>
                    <span class="n">protocol</span><span class="o">=</span><span class="n">protocol</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">REVERSE</span> <span class="o">==</span> <span class="n">template_direction</span><span class="p">:</span>
                <span class="n">matches</span> <span class="o">=</span> <span class="n">matches</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">min_query_length</span><span class="p">:</span>
                <span class="n">query_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">matches</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]])</span>
                <span class="n">template_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">matches</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>
            <span class="n">curr_node</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">curr_node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">LinkedListMatch</span><span class="o">.</span><span class="n">batch_create</span><span class="p">(</span><span class="n">template_nodes</span><span class="p">,</span> <span class="n">query_nodes</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">swap</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># if self.cyclic:</span>
        <span class="c1">#     self.reindex(1)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">fuse_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">seq</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_empty</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">seq</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">find_last</span><span class="p">()</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">seq</span><span class="o">.</span><span class="n">head</span>
        <span class="n">f</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">fuse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">fuse_in_place</span><span class="p">(</span><span class="n">copy</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">empty</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">empty_iterator</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">:</span>
        <span class="k">return</span>
        <span class="k">yield</span>

<div class="viewcode-block" id="DoubleLinkedList.node_range"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.node_range">[docs]</a>    <span class="k">def</span> <span class="nf">node_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Iterate between &#39;start&#39; to &#39;end&#39; nodes (inclusive)&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">start</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span><span class="n">stop_node</span><span class="o">=</span><span class="n">end</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">n</span></div>

<div class="viewcode-block" id="DoubleLinkedList.new_slice"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.new_slice">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">new_slice</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return a copy of the sequence between &#39;start&#39; and &#39;end&#39; nodes)&quot;&quot;&quot;</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">start</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span><span class="n">stop_node</span><span class="o">=</span><span class="n">end</span><span class="p">):</span>
                <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
                <span class="c1"># new_node = copy(n)</span>
                <span class="c1"># new_nodes.append(new_node)</span>
                <span class="c1"># new_node.set_prev(prev)</span>
                <span class="c1"># prev = new_node</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">end</span><span class="o">.</span><span class="n">rev</span><span class="p">(</span><span class="n">stop_node</span><span class="o">=</span><span class="n">start</span><span class="p">):</span>
                <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="n">nodes</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">end</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">nodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">end</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">start</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">()</span>

        <span class="nb">next</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="n">n</span><span class="o">.</span><span class="n">set_next</span><span class="p">(</span><span class="nb">next</span><span class="p">)</span>
            <span class="nb">next</span> <span class="o">=</span> <span class="n">n</span>
        <span class="n">n</span><span class="o">.</span><span class="n">set_prev</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="n">n</span><span class="p">)</span></div>

<div class="viewcode-block" id="DoubleLinkedList.copy_slice"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.copy_slice">[docs]</a>    <span class="k">def</span> <span class="nf">copy_slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return a copy of the sequence between &#39;start&#39; and &#39;end&#39; nodes.</span>

<span class="sd">        If start is None, return the slice copy from head to end. If end</span>
<span class="sd">        is None, return copy from start to tail. If both start and end</span>
<span class="sd">        are None return None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">new_slice</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span></div>

<div class="viewcode-block" id="DoubleLinkedList.range"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.range">[docs]</a>    <span class="k">def</span> <span class="nf">range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns an iterator from node at &#39;i&#39; to node at &#39;j-1&#39;.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">j</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_iterator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">j</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_iterator</span><span class="p">()</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">inclusive_range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">LinkedListIndexError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_iterator</span><span class="p">()</span></div>

<div class="viewcode-block" id="DoubleLinkedList.inclusive_range"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.inclusive_range">[docs]</a>    <span class="k">def</span> <span class="nf">inclusive_range</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">j</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return generator for inclusive nodes between index i and j.</span>

<span class="sd">        If i is None, assume i is the head node.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">LinkedListIndexError</span><span class="p">:</span>
            <span class="n">stop</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">stop_hit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">start</span><span class="o">.</span><span class="n">fwd</span><span class="p">(</span><span class="n">stop_node</span><span class="o">=</span><span class="n">stop</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">n</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="n">stop</span><span class="p">:</span>
                <span class="n">stop_hit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">stop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">stop_hit</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LinkedListIndexError</span><span class="p">(</span>
                <span class="s2">&quot;Inclusive indices </span><span class="si">{}</span><span class="s2"> out of bounds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
            <span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">index_of</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="n">node</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">i</span>

    <span class="k">def</span> <span class="nf">indices_of</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="n">index_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="n">node</span><span class="p">:</span>
                    <span class="n">index_dict</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">index_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>

<div class="viewcode-block" id="DoubleLinkedList.compare"><a class="viewcode-back" href="../../developer/_autosummary/jdna.linked_list.html#jdna.linked_list.DoubleLinkedList.compare">[docs]</a>    <span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Compares two linked lists. If both are cyclic, will attempt to</span>
<span class="sd">        reindex.</span>

<span class="sd">        :param other: other linked list</span>
<span class="sd">        :type other: DoubleLinkedList</span>
<span class="sd">        :return: whether sequence data is equivalent</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="n">anchors</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_iter</span><span class="p">(</span><span class="n">other</span><span class="p">[:</span><span class="mi">20</span><span class="p">]):</span>
                    <span class="n">anchors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">span</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">anchors</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">anchors</span><span class="p">:</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">temp</span> <span class="o">==</span> <span class="n">other</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">other</span></div>

    <span class="k">def</span> <span class="nf">left_trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Cannot chop a cyclic sequence.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">right_trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Cannot chop a cyclic sequence.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">cut_prev</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="n">data1</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">other</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">data1</span> <span class="o">==</span> <span class="n">data2</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuse</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">slice</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">,</span> <span class="n">Node</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">step</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">step</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LinkedListIndexError</span><span class="p">(</span>
                    <span class="s2">&quot;Step &gt; 1 is not supported for sliced object of &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
                    <span class="p">)</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">start</span> <span class="o">==</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>

            <span class="n">new_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__copy__</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">step</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">new_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">new_list</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">new_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">new_list</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">stop</span><span class="p">))</span>
            <span class="k">except</span> <span class="n">LinkedListIndexError</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">new_nodes</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
            <span class="n">start</span> <span class="o">=</span> <span class="n">new_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">new_nodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">start</span><span class="o">.</span><span class="n">cut_prev</span><span class="p">()</span>
            <span class="n">end</span><span class="o">.</span><span class="n">cut_next</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="n">start</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_nodes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="n">head</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">prev</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="n">new_node</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">head</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">head</span> <span class="o">=</span> <span class="n">new_node</span>
            <span class="n">new_node</span><span class="o">.</span><span class="n">set_prev</span><span class="p">(</span><span class="n">prev</span><span class="p">)</span>
            <span class="n">prev</span> <span class="o">=</span> <span class="n">new_node</span>
        <span class="n">copied</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="n">first</span><span class="o">=</span><span class="n">head</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span><span class="p">:</span>
            <span class="n">copied</span><span class="o">.</span><span class="n">cyclic</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cyclic</span>
        <span class="k">return</span> <span class="n">copied</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memo</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;copy.deepcopy not implemented with class&quot;</span>
            <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">. Use copy.copy instead.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__reversed__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DoubleLinkedList&quot;</span><span class="p">:</span>
        <span class="n">copied</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">copied</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">copied</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">length</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Node</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">fwd</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">{cls}</span><span class="s2"> data=&#39;</span><span class="si">{data}</span><span class="s2">&#39;&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span></div>
</pre></div>

          </div>
            
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">jdna 0.1.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2017, University of Washington. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>